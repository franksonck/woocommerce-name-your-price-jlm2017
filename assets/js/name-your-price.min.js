jQuery(document).ready(function(i){function e(i,e){return"undefined"==typeof e&&(e=""),accounting.formatMoney(i,{symbol:e,decimal:woocommerce_nyp_params.currency_format_decimal_sep,thousand:woocommerce_nyp_params.currency_format_thousand_sep,precision:woocommerce_nyp_params.currency_format_num_decimals,format:woocommerce_nyp_params.currency_format}).trim()}function o(i){return Math.abs(parseFloat(accounting.unformat(i,woocommerce_nyp_params.currency_format_decimal_sep)))}i.fn.woocommerce_nyp_update=function(){if(i(this).on("woocommerce-nyp-update",function(){var n=i(this),t=n.find(".nyp"),m=n.find(".nyp-input"),r=(n.find(":submit"),m.val()),a=n.find(".woocommerce-nyp-message");a.length||t.prepend('<div class="woocommerce-nyp-message woocommerce-error" style="display:none"></div>');var c=woocommerce_nyp_params.minimum_error,p=!1,s="",d=o(r),_=parseFloat(t.data("min-price")),u=parseFloat(t.data("max-price")),l=parseFloat(t.data("annual-minimum")),f=n.find(".nyp-period"),y=f.val();l>0?(form_annulualized_price=d*woocommerce_nyp_params.annual_price_factors[y],form_annulualized_price<l&&(p=l/woocommerce_nyp_params.annual_price_factors[y],s=e(p,woocommerce_nyp_params.currency_format_symbol)+" / "+f.find('option[value="'+y+'"]').text())):_>d?(p=_,s=e(p,woocommerce_nyp_params.currency_format_symbol)):d>u&&(p=u,s=e(p,woocommerce_nyp_params.currency_format_symbol),c=woocommerce_nyp_params.maximum_error),""!=i.trim(r)&&m.val(e(d)),p?(t.data("submit",!1),c=c.replace("%%MINIMUM%%",s),c=c.replace("%%MAXIMUM%%",s),a.html(c).slideDown(),m.focus()):(t.data("submit",!0),a.slideUp(),i(this).find("#product-addons-total").data("price",d),n.trigger("woocommerce-product-addons-update"),t.data("price",d),n.trigger("woocommerce-nyp-updated-item"),i("body").trigger("woocommerce-nyp-updated"))}),i(this).on("change",".nyp-input, .nyp-period",function(){var e=i(this).closest(".cart");e.trigger("woocommerce-nyp-update")}),i(this).closest("form").on("submit",function(){i(this).find(".nyp").data("submit")===!1&&(event.preventDefault(),i(this).find(":submit").removeAttr("disabled"))}),i(this).find("input.nyp-input").trigger("change"),i(this).hasClass("variations_form")){var n=i(this),t=i(this).find("button.single_add_to_cart_button"),m=i(this).find(".nyp"),r=m.find(".nyp-input"),a=m.find(".minimum-price"),c=m.find(".subscription-details"),p=t.html();m.hide(),a.hide(),n.on("found_variation",function(o,n){void 0!=typeof n.is_nyp&&1==n.is_nyp?(t.html(n.add_to_cart_text),initial_price=n.initial_price,minimum_price=n.minimum_price,maximum_price=n.maximum_price,""!=i.trim(initial_price)&&r.val(e(initial_price)),c.length&&n.subscription_terms&&c.html(n.subscription_terms),n.minimum_price_html?a.html(n.minimum_price_html).show():a.hide(),n.maximum_price_html?$maximum.html(n.maximum_price_html).show():$maximum.hide(),m.data("min-price",minimum_price).slideDown("200"),m.data("max-price",maximum_price).slideDown("200"),i(this).find("#product-addons-total").data("price",minimum_price),i(this).find("#product-addons-total").data("price",maximum_price),i(this).trigger("woocommerce-product-addons-update")):(t.html(p),m.slideUp("200"))}).on("reset_image",function(i){t.html(p),m.slideUp("200")}).on("click",".reset_variations",function(i){t.html(p),m.slideUp("200")}),i(this).find(".variations select").trigger("change")}},i("body").on("quick-view-displayed",function(){i("body").find(".cart").each(function(){i(this).woocommerce_nyp_update()})}),i("body .component").on("wc-composite-component-loaded",function(){i(this).find(".cart").each(function(){i(this).woocommerce_nyp_update()})}),i("body").find(".cart").each(function(){i(this).woocommerce_nyp_update()})});
